
<!--<div class='treeItemExpandLine'></div>-->
<div class="treeItemHeading"
    (click)="expanded=!expanded">
  <div 
    [ngClass]="{
      'treeItemExpand':true,
      'expanded':attributes.hasChildren.value && expanded,
      'collapsed':attributes.hasChildren.value && !expanded
    }" >
  </div>
  <div [ngClass]="{'treeItemTitle':true,'isModifier':attributes.isModifier.value}" (click)="onSelect();$event.stopPropagation();">{{attributes.label.value}}</div>
  <div [class]="attributes.status ? attributes.status.value : ''">{{attributes.status ? attributes.status.value : ""}}</div>
</div>
<div 
  class="treeItemInformation" 
  [ngStyle]="{
    'margin-left':((intent$ | async) * 21 + 21) +'px',
    'width':'calc(100% - ' + ((intent$ | async) * 22 + 26) +'px)'
  }"
  *ngIf="showInformationDiv$ | async ">
  <!--<div [ngClass]="{
    'treeItemExpandLine':true,
    'activated':attributes.hasChildren.value && expanded
  }"></div>-->
  <table class="searchResult" *ngIf="showSearchResult$ | async">
    <tr *ngFor="let attribute of searchResultAttributes$ | async | keyvalue as searchResultAttributes" [class]="attribute.key">
      <td>{{attribute.key}}</td>
      <td>
        <span 
          *ngFor="let match of searchMatchArray(attribute.value.value)" 
          [ngClass]="{'highlightText':match.toUpperCase()==treeDataService.getSearchPattern().toUpperCase()}"
          >{{match}}</span>
      </td>
    </tr>
  </table>
  <table>
    <ng-container *ngFor="let conceptInformation of conceptInformation$ | async; let isFirst = first">
      <tr *ngIf="isFirst" >
          <th *ngFor="let cell of conceptInformation.headings" [width]="100/conceptInformation.headings.length+'%'">{{cell}}</th>
      </tr>
      <tr *ngFor="let rows of conceptInformation.cells">
          <td *ngFor="let cell of rows" [width]="100/rows.length+'%'">{{cell}}</td>
      </tr>
    </ng-container>
  </table>
</div>
<app-tree-item-list *ngIf="expanded" [expanded]="initialExpanded" [conceptIri]="attributes.element.value"></app-tree-item-list>